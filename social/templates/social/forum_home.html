{% extends "base.html" %}
{% block title %}è®ºå›{% endblock %}
{% block header_title %}è®ºå›å¤§å…{% endblock %}

{% block page_style %}
  .wrap{max-width:900px;margin:0 auto;padding:0 24px 40px;}
  .panel{background:var(--card-bg);backdrop-filter:blur(var(--blur));box-shadow:var(--shadow);border-radius:18px;padding:16px;}
  .row{display:flex;gap:10px;margin:12px 0;}
  .panel input{flex:1;border:none;border-radius:14px;padding:12px;background:rgba(255,255,255,.35);color:var(--text);}
  .btn{padding:10px 14px;border-radius:999px;border:none;cursor:pointer;}
  .btn.primary{background:linear-gradient(135deg,#6750a4,#9f7aea);color:#fff;}
  .rooms{margin-top:14px;display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:12px;}
  .room{display:block;text-decoration:none;color:var(--text);padding:14px;border-radius:16px;background:rgba(255,255,255,.28);border:1px solid rgba(103,80,164,.18);}
  .meta{display:flex;align-items:center;justify-content:space-between;gap:10px;margin-bottom:10px;}
  .welcome{opacity:.9;font-size:14px;}
{% endblock %}

{% block content %}
<div class="wrap">
  <div class="panel">

    <!-- âœ… å½“å‰ç”¨æˆ·ä¿¡æ¯ï¼ˆæ¥è‡ª base ä¼ å…¥çš„ username/login_inï¼‰ -->
    <div class="meta">
      <div style="font-weight:700;">æˆ¿é—´åˆ—è¡¨</div>
      <div class="welcome">
        {% if login_in %}
          æ¬¢è¿ï¼Œ<b>{{ username }}</b> ğŸ‘‹
        {% else %}
          ä½ è¿˜æœªç™»å½•ï¼ˆè¿›å…¥æˆ¿é—´ä¼šæç¤ºç™»å½•ï¼‰
        {% endif %}
      </div>
    </div>

    <form method="post">
      {% csrf_token %}
      <div class="row">
        <input name="name" placeholder="åˆ›å»ºä¸€ä¸ªæˆ¿é—´ï¼ˆä¾‹å¦‚ï¼šæ‰˜ç¦å£è¯­äº’åŠ©ï¼‰" maxlength="60" required>
        <button class="btn primary" type="submit">åˆ›å»º/è¿›å…¥</button>
      </div>
    </form>

    <div class="rooms">
      {% for r in rooms %}
        <!-- âœ… è¿›å…¥æˆ¿é—´æ—¶æŠŠç”¨æˆ·åå¸¦è¿‡å»ï¼ˆå¦‚æœå·²ç™»å½•ï¼‰ -->
        <a class="room"
           href="{% url 'social:chat_room' slug=r.slug %}{% if login_in %}?username={{ username|urlencode }}{% endif %}">
          <div style="font-weight:700;">{{ r.name }}</div>
          <div style="opacity:.75;font-size:13px;">{{ r.created_at|date:"Y-m-d H:i" }}</div>
        </a>
      {% empty %}
        <div style="opacity:.8;">è¿˜æ²¡æœ‰æˆ¿é—´ï¼Œå…ˆåˆ›å»ºä¸€ä¸ªå§ï½</div>
      {% endfor %}
    </div>
  </div>
</div>
{% endblock %}
